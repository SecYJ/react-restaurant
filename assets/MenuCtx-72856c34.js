import{r as i,j as o}from"./jsx-runtime-00d1b5d3.js";const m=(e,{payload:r,type:n})=>{const t=u=>u==="全部"?[...e.menu]:e.menu.filter(c=>c.category===u);switch(n){case"SET_MENU":return e.menu.length===0?{...e,menu:[...r].sort(()=>Math.random()-.5),filtered_menu:[...r]}:{...e,filtered_menu:t(e.currentSelect)};case"SEARCH_PRODUCTS":{if(r==="")return{...e,filtered_menu:t(e.currentSelect)};const u=e.menu.filter(c=>c.name.toLowerCase().includes(r));return{...e,filtered_menu:u}}case"SORT_BY_CATEGORY":return{...e,currentSelect:r,filtered_menu:t(r)};case"SET_SEARCH":return{...e,search:r}}throw new Error("Unknown action"+n)},s=i.createContext(),f={menu:[],filtered_menu:[],currentSelect:"全部",search:""},S=({children:e})=>{const[r,n]=i.useReducer(m,f);return o(s.Provider,{value:{...r,dispatch:n},children:e})},_=()=>i.useContext(s);export{S as M,_ as u};
